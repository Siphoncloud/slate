
<!doctype html>
<html>
  <head>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#traffic-endpoints" class="toc-h1 toc-link" data-title="Traffic Endpoints">Traffic Endpoints</a>
          </li>
          <li>
            <a href="#visit" class="toc-h1 toc-link" data-title="Visit">Visit</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#new-visit" class="toc-h2 toc-link" data-title="New Visit">New Visit</a>
                  </li>
                  <li>
                    <a href="#solve-a-captcha" class="toc-h2 toc-link" data-title="Solve a captcha">Solve a captcha</a>
                  </li>
                  <li>
                    <a href="#record-a-maneuver" class="toc-h2 toc-link" data-title="Record a maneuver">Record a maneuver</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://changelog.siphoncloud.com/'>Changelog</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Siphon API! You can use our API to access Siphon API endpoints, which can allow you to filter traffic.</p>

<p>Multiple integrations exist already for popular CMS (Content Management Systems) like WordPress and Joomla, we also have a full integration for PHP already that can be downloaded inside your <a href="https://siphoncloud.com/dashboard/traffic-filter-resources.php">dashboard</a>.</p>
<h1 id='traffic-endpoints'>Traffic Endpoints</h1>
<p>These endpoints allow for the sending of website traffic and receiving real-time judgements based on filter settings. A simple flow chart has also been created to demonstrate the logic for using these endpoints in your application effectively. 
<br><br>
<a href='images/traffic_endpoints_logic_flow.png'><img src="images/traffic_endpoints_logic_flow.png"></a></p>
<h1 id='visit'>Visit</h1><h2 id='new-visit'>New Visit</h2>
<blockquote><p>Replace <code>123abcToken</code> & <code>123abcId</code> with your own values</p></blockquote>
<pre class="highlight shell tab-shell"><code>curl --request POST <span class="se">\</span>
  --url https://siphon-api.com/v3/visit/new/ <span class="se">\</span>
  --header <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  --header <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data <span class="s1">'{ \
    "apitoken": "123abcToken", \
    "apiid": "123abcId", \
    "remote_addr": "192.168.1.1", \
    "remote_port": "16017", \
    "server_protocl": "HTTP\/1.1", \
    "connection": "keep-alive", \
    "user_agent": "Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/62.0.3202.89 Safari\/537.36", \
    "upgrade_insecure_requests": "1", \
    "http_accept": "text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8", \
    "accept_encoding": "gzip", \
    "accept_language": "en-US,en;q=0.9", \
    "cookies": "__cfduid=d130c6d17df1705100ccca3f68ac3a5b61506533527;", \
    "request_method": "get", \
    "request_time": "1510780023", \
    "refer": "", \
    "server_software": "nginx", \
    "server_version": "1.6.2", \
    "host": "example.com", \
    "script_name": "\/something.html", \
    "query_string": "var1=something", \
    "http_cf_ray": "3be535j29bac91dc-EWR", \
    "http_cf_visitor": "{\"scheme\":\"https\"}", \
    "http_cf_connecting_ip": "192.168.1.2", \
    "http_x_forwarded_proto": "https", \
    "http_x_forwarded_for": "192.168.1.1", \
    "request_full_response": "true" \
   }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"do"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sendto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/lander1.hml"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fhid"</span><span class="p">:</span><span class="w"> </span><span class="mi">753159</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"h"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pa"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"philadelphia"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19102"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"potential_bot_score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"proxy_likelyhood"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"os_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"browser_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chrome"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows processing of a new visitor to a website where no previous cookie is detected. All data should be sent <code>JSON</code> encoded.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://siphon-api.com/v3/visit/new/</code></p>
<h3 id='required-parameters'>Required Parameters</h3>
<p>All of the information being sent to Siphon should not be processed by your system in any way as Siphon will perform its own parsing of fields, this means the data should be &quot;raw&quot;.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>apitoken</td>
<td>string</td>
<td>Authentication parameter that is unique per filter</td>
</tr>
<tr>
<td>apiid</td>
<td>int</td>
<td>Authentication parameter that is unique per filter</td>
</tr>
<tr>
<td>remote_addr</td>
<td>string</td>
<td>Either an IPv4 or IPv6 address of the visitor</td>
</tr>
<tr>
<td>remote_port</td>
<td>int</td>
<td>Port that the connection was made to the web server on</td>
</tr>
<tr>
<td>server_protocl</td>
<td>string</td>
<td>The hypertext transfer protocol version. Typically either &quot;HTTP 1.1&quot; or &quot;HTTP 1.0&quot;</td>
</tr>
<tr>
<td>connection</td>
<td>string</td>
<td>either &quot;keep-alive&quot; or &quot;close&quot;</td>
</tr>
<tr>
<td>user_agent</td>
<td>string</td>
<td>Raw user-agent string received from the client</td>
</tr>
<tr>
<td>upgrade_insecure_requests</td>
<td>int</td>
<td>Raw HTTP header sent by the client</td>
</tr>
<tr>
<td>http_accept</td>
<td>string</td>
<td>Raw HTTP header sent by the client</td>
</tr>
<tr>
<td>accept_encoding</td>
<td>string</td>
<td>Raw HTTP header sent by the client</td>
</tr>
<tr>
<td>accept_language</td>
<td>string</td>
<td>Raw HTTP header sent by the client</td>
</tr>
<tr>
<td>cookies</td>
<td>string or null</td>
<td>List of cookies the client is using separated by semicolons or a null value for no cookies</td>
</tr>
<tr>
<td>request_method</td>
<td>string</td>
<td>Type of request of the client made, typically is one of the following: &quot;post&quot;, &quot;put&quot;, or &quot;get&quot;</td>
</tr>
<tr>
<td>request_time</td>
<td>string</td>
<td>A unix timestamp of when the request was first received</td>
</tr>
<tr>
<td>refer</td>
<td>string</td>
<td>Refer of the visitor</td>
</tr>
<tr>
<td>server_software</td>
<td>string</td>
<td>One of the following must be sent: apache,nginx,iis,tomcat,lighttpd,other</td>
</tr>
<tr>
<td>server_version</td>
<td>string</td>
<td>The software version of server software that has received this request</td>
</tr>
</tbody></table>

<aside class="notice">
The requested URL must also be sent in one of the following ways
</aside> 
<h4 id='separated-url-parameters'>Separated URL parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>host</td>
<td>string</td>
<td>Domain name of the server</td>
</tr>
<tr>
<td>script_name</td>
<td>string</td>
<td>URL path to the script being requested by the client</td>
</tr>
<tr>
<td>query_string</td>
<td>string</td>
<td>The query parameters of the request</td>
</tr>
</tbody></table>
<h4 id='single-url-parameter'>Single URL parameter</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>The complete url for the request. Siphon will then parse this itself</td>
</tr>
</tbody></table>
<h3 id='optional-parameters'>Optional Parameters</h3>
<p>Siphon fully supports the use of Cloudflare and as such accepts the <a href="https://support.cloudflare.com/hc/en-us/articles/200170986-How-does-Cloudflare-handle-HTTP-Request-headers-">custom headers</a> that Cloudflare adds to requests</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>http_cf_ray</td>
<td>string</td>
<td>Raw header added by Cloudflare</td>
</tr>
<tr>
<td>http_cf_visitor</td>
<td>string</td>
<td>Raw header added by Cloudflare</td>
</tr>
<tr>
<td>http_cf_connecting_ip</td>
<td>string</td>
<td>Raw header added by Cloudflare</td>
</tr>
<tr>
<td>http_x_forwarded_proto</td>
<td>string</td>
<td>Raw header added by Cloudflare</td>
</tr>
<tr>
<td>http_x_forwarded_for</td>
<td>string</td>
<td>Raw header added by Cloudflare</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_full_response</td>
<td>bool</td>
<td>Set to &#39;true&#39; if you would like additional details on response</td>
</tr>
</tbody></table>
<h2 id='solve-a-captcha'>Solve a captcha</h2><pre class="highlight shell tab-shell"><code>curl --request POST <span class="se">\</span>
  --url https://siphon-api.com/v3/visit/solvecaptcha/ <span class="se">\</span>
  --header <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  --header <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data <span class="s1">'{ \
    "captcha_token ": "qLweVCIrk2GV", \
    "captcha_choice": "60" \
   }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured exactly like the <a href="#new-visit">visit/new/ endpoint</a> returns</p>
</blockquote>

<p>This endpoint allows clients to solve Siphon supplied captchas.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://siphon-api.com/v3/visit/captchasolve/</code></p>
<h3 id='required-parameters-2'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>captcha_token</td>
<td>string</td>
<td>The captcha token sent back by Siphon in the original new visit call</td>
</tr>
<tr>
<td>captcha_choice</td>
<td>string</td>
<td>The choice of the client in their attempt to solve the captcha</td>
</tr>
</tbody></table>
<h2 id='record-a-maneuver'>Record a maneuver</h2><pre class="highlight shell tab-shell"><code>curl --request POST <span class="se">\</span>
  --url https://siphon-api.com/v3/visit/maneuver/ <span class="se">\</span>
  --header <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  --header <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data <span class="s1">'{ \
    "apitoken": "123abcToken", \
    "apiid": "123abcId", \
    "fhid": "45044" \
    "host": "example.com", \
    "script_name": "/another_page.html", \
    "query_string": "var5=something6" \
</span></code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows the recording of maneuvers on a site by a client after a visit</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://siphon-api.com/v3/visit/maneuver/</code></p>
<h3 id='required-parameters-3'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>apitoken</td>
<td>string</td>
<td>Authentication parameter that is unique per filter</td>
</tr>
<tr>
<td>apiid</td>
<td>int</td>
<td>Authentication parameter that is unique per filter</td>
</tr>
<tr>
<td>fhid</td>
<td>int</td>
<td>Authentication parameter that is unique per filter</td>
</tr>
</tbody></table>

<aside class="notice">
The requested URL must also be sent in one of the following ways
</aside> 
<h4 id='separated-url-parameters-2'>Separated URL parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>host</td>
<td>string</td>
<td>Domain name of the server</td>
</tr>
<tr>
<td>script_name</td>
<td>string</td>
<td>URL path to the script being requested by the client</td>
</tr>
<tr>
<td>query_string</td>
<td>string</td>
<td>The query parameters of the request</td>
</tr>
</tbody></table>
<h4 id='single-url-parameter-2'>Single URL parameter</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>The complete url for the request. Siphon will then parse this itself</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>The Siphon API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Your request is malformed.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API credentials are wrong.</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required</td>
<td>Your account does not have an active subscription</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>Your request is trying to access an unknown endpoint.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>You tried to access an end point with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable</td>
<td>You requested a format that is not json.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
